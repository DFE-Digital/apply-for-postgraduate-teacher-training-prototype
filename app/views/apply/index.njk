{% extends "_form.njk" %}

{% set course = providerCode | getCourse(courseCode) %}
{% if course %}
  {% if dualRunning %}
    {% if variant == 1 %}
      {% set title = "You can apply for this course using a new GOV.UK service" %}
    {% elseif variant == 2 or variant == 3 %}
      {% set title = "Apply for this course" %}
    {% else %}
      {% set title = "You can apply for this course using a new GOV.UK service" %}
    {% endif %}
  {% else %}
    {% set title = "Apply for this course" %}
  {% endif %}
  {% set parent = course.name_and_code %}
{% else %}
  {% set title = serviceName %}
{% endif %}
{% set hasAccountLinks = false %}

{% block pageNavigation %}
  {{ govukBackLink({
    "href": "javascript: window.history.go(-1)"
  }) }}
{% endblock %}

{% block primary %}
  {# Choice available – show a random variant #}
  {% if course and dualRunning %}
    {# Variant 1: Steer towards Apply _without_ financial incentive #}
    {% if variant == 1 %}
      {% include "apply/_variant-small-ucas-choice.njk" %}

    {# Variant 2: Balanced choice but _with_ financial incentive #}
    {% elseif variant == 2 %}
      {% include "apply/_variant-financial-incentive.njk" %}

    {# Variant 3: Balanced choice but with additional course incentive #}
    {% elseif variant == 3 %}
      {% include "apply/_variant-courses-incentive.njk" %}

    {% endif %}
  {# Must apply through UCAS #}
  {% elif course and not dualRunning %}
    <p class="govuk-body">You must apply for this course on UCAS. You’ll need to register with UCAS before you can apply. Visit <a href="https://getintoteaching.education.gov.uk/how-to-apply-for-teacher-training">Get into Teaching for guidance on applying for teacher training</a>.</p>
    <p>When you apply you’ll need these codes for the Choices section of your application form:</p>

    <div class="govuk-inset-text">
      <ul class="govuk-list">
        <li class="govuk-!-margin-bottom-2">
          Training provider code:
          <span class="govuk-!-display-block govuk-!-font-size-36 govuk-!-font-weight-bold">{{ providerCode }}</span>
        </li>
        <li>
          Training programme code:
          <span class="govuk-!-display-block govuk-!-font-size-36 govuk-!-font-weight-bold">{{ courseCode }}</span>
        </li>
      </ul>
    </div>

    {{ govukButton({
      text: "Apply through UCAS",
      href: "https://2020.teachertraining.apply.ucas.com/apply/student/login.do",
      isStartButton: true
    }) }}

  {# Can’t find course #}
  {% else %}
    <p class="govuk-body">We couldn’t find the course you’re looking for – there may be a problem with the training provider and/or course code(s).</p>
    <p class="govuk-body">Go back to <a href="{{ data['find_url'] }}">Find postgraduate teacher training</a> and try selecting your course again, or choose a different course.</p>

    {{ govukButton({
      text: "Find postgraduate teacher training",
      href: data['find_url'],
      isStartButton: true
    }) }}
  {% endif %}
{% endblock %}
