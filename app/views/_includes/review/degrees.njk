{% set applicationPath = "/application/" + applicationId %}
{% set choice = applicationValue(["choices"]) | toArray | first %}
{% set provider = choice.providerCode | getProvider %}
{% set degrees = applicationValue(["degree"]) | toArray %}

{% set complete = degrees | length > 0 %}
{% if complete %}
  <div class="govuk-inset-text app-inset-text--important govuk-!-width-two-thirds">
    <h3 class="govuk-heading-s">{{ provider.name }} asks for a minimum of a 2:1 at degree level. Your degree grade is a 2:2.</h3>
    <p class="govuk-body">Most training providers will not accept applications that do not meet their criteria.</p>
    <p class="govuk-body">Some training providers will look to other parts of your application to assess your suitability for teaching. Make sure you have entered all of your qualifications, and been clear about why you want to teach in your personal statement.</p>
  </div>
  {% set degrees = degrees | selectattr("id") %}
  {% for item in degrees %}
    {% set degreeHtml %}
      {% include "_includes/item/degree.njk" %}
    {% endset %}
    {% set degreeType = (item["type-uk"] or item["type-nonuk"]) + (" (Hons)" if (item.grade and item.grade.includes("honours"))) %}
    {% if item.provenance == "domestic" %}
      {% set titleText = degreeType + " " + item.subject %}
    {% else %}
      {% set titleText = degreeType + ": " + item.subject %}
    {% endif %}
    {{ appSummaryCard({
      classes: "govuk-!-margin-bottom-6",
      headingLevel: 3,
      titleText: titleText,
      actions: {
        items: [{
          href: applicationPath + "/degree/" + item.id + "/delete?referrer=" + referrer,
          text: "Delete degree"
        }]
      } if canAmend,
      html: degreeHtml
    }) }}
  {% endfor %}
{% else %}
  {{ appSuggestion({
    id: "degree",
    title: "Degree section not marked as completed",
    warning: true if errorList,
    actions: {
      items: [{
        text: "Enter your degree",
        href: applicationPath + "/degree/add?referrer=" + referrer
      }]
    }
  }) }}
{% endif %}
