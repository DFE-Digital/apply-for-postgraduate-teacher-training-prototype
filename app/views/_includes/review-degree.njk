{% set applicationPath = "/application/" + applicationId %}

{% set type -%}
  {%- if degree.type -%}
    {{ degree.type }} {{ degree.subject }}
  {%- else -%}
    Not entered
  {%- endif %}
{%- endset %}

{% set institution -%}
  {%- if degree.institution -%}
    {{ degree.institution }}
    {{ degree.country }}
  {%- else -%}
    Not entered
  {%- endif %}
{%- endset %}

{% set grade = "Pending: " + degree["grade-predicted"] if degree["grade"] == "Pending" else degree["grade-other"] or degree.grade %}

{{ degree["grade-pending"] }}

{{ govukSummaryList({
  classes: "app-summary",
  rows: [{
    key: {
      text: "Qualification"
    },
    value: {
      text: type | nl2br | safe
    },
    actions: {
      classes: "govuk-!-padding-right-2",
      items: [{
        href: applicationPath + "/degree/" + degree.id + "?referrer=" + referrer,
        text: "Change",
        visuallyHiddenText: "year"
      }]
    } if review != true
  }, {
    key: {
      text: "Institution"
    },
    value: {
      text: institution | nl2br | safe
    },
    actions: {
      classes: "govuk-!-padding-right-2",
      items: [{
        href: applicationPath + "/degree/" + degree.id + "?referrer=" + referrer,
        text: "Change",
        visuallyHiddenText: "year"
      }]
    } if review != true
  }, {
    key: {
      text: "Year awarded"
    },
    value: {
      text: (degree.year | default("Not entered")) | nl2br | safe
    },
    actions: {
      classes: "govuk-!-padding-right-2",
      items: [{
        href: applicationPath + "/degree/" + degree.id + "/year?referrer=" + referrer,
        text: "Change",
        visuallyHiddenText: "year"
      }]
    } if review != true
  }, {
    key: {
      text: "Grade"
    },
    value: {
      text: (grade | default("Not entered")) | nl2br | safe
    },
    actions: {
      classes: "govuk-!-padding-right-2",
      items: [{
        href: applicationPath + "/degree/" + degree.id + "/grade?referrer=" + referrer,
        text: "Change",
        visuallyHiddenText: "grade"
      }]
    } if review != true
  }]
}) }}
