{% set applicationPath = "/application/" + applicationId %}

{% set itemStart = item["start-date"] %}
{% set itemEnd = item["end-date"] if item["end-date"] else "now" %}
{% set itemStartEpoch = itemStart | date("x") %}
{% set itemEndEpoch = itemEnd | date("x") %}
{% set itemDuration = itemEndEpoch - itemStartEpoch %}

{% set gapText -%}
  Gap ({{ itemDuration | duration }})
{%- endset %}

{% set datesText %}
  {{ itemStart | date("MMMM yyyy") }} - {{ itemEnd | date("MMMM yyyy") if item["end-date"] else "Present" }}
{% endset %}

{% set changeHref = applicationPath + "/work-history/gap/" + item.id + "?referrer=" + referrer %}

{{ govukSummaryList({
  rows: [{
    key: {
      text: "Description"
    },
    value: {
      text: item.description or "Not entered"
    },
    actions: {
      items: [{
        href: changeHref,
        text: "Change",
        visuallyHiddenText: "description"
      }]
    } if review == true
  }, {
    key: {
      text: "Dates"
    },
    value: {
      text: datesText
    },
    actions: {
      items: [{
        href: changeHref,
        text: "Change",
        visuallyHiddenText: "dates"
      }]
    } if review == true
  }]
}) }}
