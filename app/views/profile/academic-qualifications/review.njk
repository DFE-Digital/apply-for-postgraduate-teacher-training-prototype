{% extends "_form.njk" %}

{% set title = "Academic qualifications" %}
{% set formAction = "/profile/" %}

{% block pageNavigation %}
  {{ govukBreadcrumbs({
    items: [{
      text: "Home",
      href: "/dashboard"
    }, {
      text: "Your details",
      href: "/profile"
    }, {
      text: title
    }]
  }) }}
{% endblock %}

{% block primary %}
{% if data["degree-completed"] %}
  {% set degrees = data['degrees'] | toArray %}
  <table class="govuk-table govuk-!-font-size-16">
    <caption class="govuk-table__caption govuk-heading-m">Your school experience and roles</caption>
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header" scope="col">Qualification</th>
        <th class="govuk-table__header" scope="col">Grade</th>
        <th class="govuk-table__header" scope="col">Year awarded</th>
        <th class="govuk-table__header" scope="col">Actions</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for item in degrees %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">{{ item.type }} {{ item.subject }}</td>
        <td class="govuk-table__cell">{{ item.grade }}</td>
        <td class="govuk-table__cell">{{ item.year }}</td>
        <td class="govuk-table__cell"><a href="/profile/academic-qualifications/edit-degree/{{ item.id }}">Edit degree</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {{ govukButton({
    text: "Add another degree",
    classes: "govuk-button--secondary",
    href: "/profile/academic-qualifications/degree"
  }) }}
{% else %}
  <h2 class="govuk-heading-m">Degree(s)</h2>
  {{ govukButton({
    text: "Add degree",
    classes: "govuk-button--secondary",
    href: "/profile/academic-qualifications/degree"
  }) }}
{% endif %}

  {{ govukTable({
    caption: "Required subjects",
    captionClasses: "govuk-heading-m",
    classes: "govuk-!-font-size-16",
    firstCellIsHeader: false,
    head: [{
      text: "Qualification"
    }, {
      text: "Grade"
    }, {
      text: "Year awarded"
    }, {
      text: "Actions"
    }],
    rows: [
      [{
        text: "Maths " + data["maths-qualification-type"]
      }, {
        text: data['maths-qualification-grade']
      }, {
        text: data['maths-qualification-year']
      }, {
        html: "<a href=\"/profile/academic-qualifications/edit-maths-gcse\">Edit</a>"
      }], [{
        text: "English " + data["english-qualification-type"]
      }, {
        text: data['english-qualification-grade']
      }, {
        text: data['english-qualification-year']
      }, {
        html: "<a href=\"/profile/academic-qualifications/edit-english-gcse\">Edit</a>"
      }], [{
        text: "Science " + data["science-qualification-type"]
      }, {
        text: data['science-qualification-grade']
      }, {
        text: data['science-qualification-year']
      }, {
        html: "<a href=\"/profile/academic-qualifications/edit-science-gcse\">Edit</a>"
      }]
    ]
  }) }}

{% if data["qualifications-completed"] %}
  {% set qualifications = data['qualifications'] | toArray %}
  <table class="govuk-table govuk-!-font-size-16">
    <caption class="govuk-table__caption govuk-heading-m">Your school experience and roles</caption>
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header" scope="col">Qualification</th>
        <th class="govuk-table__header" scope="col">Grade</th>
        <th class="govuk-table__header" scope="col">Year awarded</th>
        <th class="govuk-table__header" scope="col">Actions</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for item in qualifications %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">{{ item.type }} {{ item.subject }}</td>
        <td class="govuk-table__cell">{{ item.grade }}</td>
        <td class="govuk-table__cell">{{ item.year }}</td>
        <td class="govuk-table__cell"><a href="/profile/academic-qualifications/edit-qualification/{{ item.id }}">Edit qualification</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {{ govukButton({
    html: "Add another qualification",
    classes: "govuk-button--secondary",
    href: "/profile/academic-qualifications/add-qualification"
  }) }}
{% else %}
  <h2 class="govuk-heading-m">Other relevant qualifications</h2>
  <p class="govuk-body">Enter your remaining GCSEs, A levels, and any practical, vocational or arts-based qualifications. Providers use this information to assess your academic ability and the broader contribution you can make to a school.</p>
  {{ govukButton({
    html: "Add qualification",
    classes: "govuk-button--secondary",
    href: "/profile/academic-qualifications/add-qualification"
  }) }}
{% endif %}

  {{ govukCharacterCount({
    label: {
      text: "Is there anything youâ€™d like to tell us about your qualifications?",
      classes: "govuk-label--m"
    },
    id: "subject-knowledge-additional",
    name: "subject-knowledge-additional",
    value: data["subject-knowledge-additional"],
    maxwords: 600,
    rows: 12
  }) }}

  {{ govukInput({
    id: "academic-qualifications-completed",
    name: "academic-qualifications-completed",
    type: "hidden",
    value: true
  }) }}

  {{ govukButton({
    text: "Save and continue"
  }) }}
{% endblock %}
