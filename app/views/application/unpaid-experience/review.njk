{% extends "_form-wide.njk" %}

{% set applicationPath = "/application/" + applicationId %}
{% set formaction = applicationPath %}
{% set title = "Unpaid experience" %}
{% set referrer = applicationPath + "/unpaid-experience/review" %}
{% set canAmend = true %}
{% set unpaidExperience = applicationValue("unpaidExperience") | toArray | selectattr("id") %}
{% set addButtonText = "Add another role" if unpaidExperience.length >= 1 else "Add a role" %}

{% block pageNavigation %}
  {{ govukBackLink({
    href: "/application/" + applicationId,
    text: "Back to application"
  }) }}
{% endblock %}

{% block primary %}
  {{ govukButton({
    text: addButtonText,
    href: applicationPath + "/unpaid-experience/add/role?referrer=" + referrer,
    classes: "govuk-button--secondary"
  }) if applicationValue(["unpaidExperienceDisclose"]) != "No" }}

  {% include "_includes/review/unpaid-experience.njk" %}

  {{ govukCheckboxes({
    items: [{
      value: "true",
      text: "I have completed this section"
    }]
  } | decorateApplicationAttributes(["completed", "unpaidExperience"])) }}

  {{ govukButton({
    text: "Continue"
  }) }}
{% endblock %}
